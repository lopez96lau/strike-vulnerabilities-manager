import { useDraggable } from "@dnd-kit/core";
import { CSS } from "@dnd-kit/utilities";
import VulnerabilityCard from "../VulnerabilityCard";
import { Vulnerability } from "@/app/vulnerabilities/types";

interface Props {
  vulnerability: Vulnerability;
  color: string;
  onClick: () => void;
}

export default function DraggableVulnerabilityCard({
  vulnerability,
  color,
  onClick,
}: Props) {
  const { attributes, listeners, setNodeRef, transform } = useDraggable({
    id: vulnerability.id,
  });

  const style = transform
    ? {
        transform: CSS.Transform.toString(transform),
        zIndex: 999,
        opacity: 0,
      }
    : undefined;

  return (
    <div ref={setNodeRef} style={style} {...listeners} {...attributes}>
      <div onClick={onClick}>
        <VulnerabilityCard {...vulnerability} color={color} />
      </div>
    </div>
  );
}
